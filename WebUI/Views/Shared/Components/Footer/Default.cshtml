@using WebUI.Models.ViewModels
@model FooterViewModel
@{
    var phoneList = Model.Company?.GetPhoneNumbers() ?? new List<string>();
    var mailList = Model.Company?.GetEmailAdresses() ?? new List<string>();
}

<footer id="footer" class="footer" style="border-top: 1px solid #ededed">
    @if (Model.Company != null && Model.Company.Latitude != null && Model.Company.Longitude != null)
    {
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
        <div class="footer-newsletter">
            <div class="container">
                <div class="row justify-content-center text-center">
                    <div class="col-lg-8">
                        <div id="map" style="border:0; width:100%; height:300px;"></div>
                    </div>
                </div>
            </div>
        </div>
    }

    <div class="container footer-top">
        <div class="row gy-4">
            <div class="col-lg-4 col-md-6 footer-about">
                <a href="index.html" class="d-flex align-items-center">
                    <img src="@Model.Company?.Logo" alt="" style="width:150px">
                </a>
                <div class="footer-contact pt-3">
                    <per>@Model.Company?.Address</per>
                    @if (phoneList != null)
                    {
                        foreach (var phone in phoneList)
                        {
                            <p class="mt-3"><strong>Telefon Numarası:</strong> <span>@phone</span></p>
                        }
                    }
                    @if (mailList != null)
                    {
                        foreach (var mail in mailList)
                        {
                            <p><strong>Eposta:</strong> <span>@mail</span></p>
                        }
                    }
                </div>
            </div>

            <div class="col-lg-4 col-md-6 footer-links">
                <h4>Sayfalar</h4>
                <ul>
                    @if (Model.ShowablePageList != null)
                    {
                        @foreach (var pageItem in Model.ShowablePageList)
                        {
                            <li><i class="bi bi-chevron-right"></i> <a href="/@pageItem.PathName">@pageItem.Name</a></li>
                        }
                    }
                    <li><i class="bi bi-chevron-right"></i> <a href="/Contact">İletişim</a></li>
                    <li><i class="bi bi-chevron-right"></i> <a href="http://teknikdestek.expresbilgisayar.com/">Teknik Destek</a></li>
                </ul>
            </div>

            @* <div class="col-lg-2 col-md-3 footer-links">
				<h4>Our Services</h4>
				<ul>
					<li><i class="bi bi-chevron-right"></i> <a href="#">Web Design</a></li>
					<li><i class="bi bi-chevron-right"></i> <a href="#">Web Development</a></li>
					<li><i class="bi bi-chevron-right"></i> <a href="#">Product Management</a></li>
					<li><i class="bi bi-chevron-right"></i> <a href="#">Marketing</a></li>
				</ul>
			</div> *@

            <div class="col-lg-4 col-md-12">
                <h4>İletişim</h4>
                <p>Sosyal Medya Bağlantılarımız</p>
                <div class="social-links d-flex">
                    @if (Model.Links != null)
                    {
                        foreach (var link in Model.Links)
                        {
                            <a href="@link.Url" target="_blank"><i class="@link.Icon"></i></a>
                        }
                    }
                </div>
            </div>
        </div>
    </div>

    <div class="container copyright text-center mt-4">
        <p>© <span>Copyright</span> <strong class="px-1 sitename">Express Elektronik.</strong> <span>Tüm Hakları Saklıdır</span></p>
        <div class="credits">
            Producted by <a href="www.gorayazilim.com">Gora Yazılım</a>
        </div>
    </div>
</footer>


@if (Model.Company != null && Model.Company.Latitude != null && Model.Company.Longitude != null)
{

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script>
        var map = L.map('map').setView([@Model.Company.Latitude, @Model.Company.Longitude], 15); // Enlem, boylam

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19
        }).addTo(map);

        let marker = L.marker([@Model.Company.Latitude, @Model.Company.Longitude]).addTo(map).openPopup();

        marker.bindPopup(`
            Express Bilgisayar! <br>
            <a href="https://www.google.com/maps/dir/?api=1&destination=${@Model.Company.Latitude},${ @Model.Company.Longitude}&travelmode=driving" target="_blank">
                Yol Tarifi Al
            </a>
        `);
    </script>
}
